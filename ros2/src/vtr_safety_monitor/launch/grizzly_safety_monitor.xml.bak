<?xml version="1.0" encoding="utf-8"?>
<launch>

  <arg name="DEBUG" default="false"/>
  <arg name="scenario" default="default"/>

  <node pkg="asrl__safety_monitor" type="safety_monitor_node" name="safety_monitor_node" output="screen">

    <!-- List of Monitors to load -->
    <rosparam unless="$(arg DEBUG)" command="load"
              file="$(find asrl__safety_monitor)/param/scenarios/$(arg scenario).yaml"/>

    <!--TEST PROFILE ONLY!! NEVER USE THIS ON A REAL ROBOT.-->
    <rosparam if="$(arg DEBUG)" command="load"
              file="$(find asrl__safety_monitor)/param/scenarios/$(arg scenario)_debug.yaml"/>

    <!-- PARAMETERS -->
    <!-- Localization params -->
    <remap from="/safety_monitor_node/in/tracking_status" to="/ShamNav/out/tracker_status"/>

    <!-- Deadman monitor params -->
    <remap from="/safety_monitor_node/in/joy" to="/xbox_joy"/>

    <!-- EStop monitor params -->
    <remap from="/safety_monitor_node/in/grizzly_diagnostics_status" to="/diagnostics" />

    <!-- Path Tracker monitor params -->
    <remap from="/safety_monitor_node/in/path_tracker_status" to="/path_tracker/out/status" />
    <param name="max_allowed_speed" value="4.5"/> <!-- Meters/Second -->
    <param name="min_allowed_speed" value="0.5"/> <!-- Meters/Second -->
    <param name="acceptable_lateral_error" value="0.5"/> <!-- Meters -->
    <param name="acceptable_heading_error" value="20"/> <!-- Degrees -->
    <param name="acceptable_pred_lateral_error" value="1.5"/> <!-- Meters -->
    <param name="acceptable_pred_heading_error" value="90"/> <!-- Degrees -->
    <param name="max_dist_between_vo_or_loc_updates" value="1.5"/> <!--Meters -->
    <param name="max_time_between_vo_or_loc_updates" value="1.0"/> <!--Seconds -->
    <param name="pred_tracking_error_speed_reduction_pct" value="0.999"/> <!--pct -->

    
    <!-- Localization uncertainty params -->
    <!-- 1-sigma limit on the translation uncertainty in the x-direction Meters -->
    <param name="translation_x_limit" value="1.0"/>
    <!-- 1-sigma limit on the translation uncertainty in the x-direction Meters -->
    <param name="translation_y_limit" value="0.3"/>
    <!-- 1-sigma limit on the translation uncertainty in the x-direction Meters -->
    <param name="translation_z_limit" value="10.0"/>
    <!-- 1-sigma limit on the rotation uncertainty of the x-axis Degrees -->
    <param name="rotation_x_limit" value="10.0"/>
    <!-- 1-sigma limit on the rotation uncertainty of the x-axis Degrees -->
    <param name="rotation_y_limit" value="10.0"/>
    <!-- 1-sigma limit on the rotation uncertainty of the x-axis Degrees -->
    <param name="rotation_z_limit" value="2.0"/>
    <!-- Incline monitor params -->
    <remap from="/safety_monitor_node/in/incline_status" to="/mast_imu/data"/>

    <!-- Terrain assessment monitor params -->
    <!-- <remap from="safety_monitor_node/in/safety" to="/ShamNav/terrain_assessment/change_detection/out/safety"/> -->

    <!-- Grizzly Ambience params -->
    <!--<remap from="~/out/ambience_instructions" to="/GrizzlyAmbienceNode/in/ambience_instructions" />-->

  </node>


  <!--<arg name="default_plot_height" default="9"/>-->

  <!--<include file="$(find asrl__vehicle_safety__safety_monitor)/launch/user_interface.xml">-->
    <!--<arg name="default_plot_height" value="$(arg default_plot_height)"/>-->
  <!--</include>-->

</launch>
